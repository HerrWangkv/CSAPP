# 1 信息就是位+上下文
ASCII码允许用唯一的单字节大小(8个位)的整数值代表每个字符。这样我们编写的源程序(源文件)其实是只由ASCII字符构成的**文本文件**。所有其他文件称为**二进制文件**。

# 2 程序被其他程序翻译成不同的格式
```
gcc -o hello hello.c 
```
上述命令的具体过程如下：
- 预处理阶段。预处理器(cpp)处理源程序hello.c中以```#```开头的命令，如：```#include <iostream>```告诉预处理器读取该头文件的内容，并**直接插入到程序文本中**。这样通常得到了另一个文本文件：hello.i
- 编译阶段。编译器(ccl)将文本文件hello.i翻译成一个**包含汇编语言程序**的文本文件hello.s。汇编语言是一种介于高级语言和机器语言指令之间的低级语言。
- 汇编阶段。汇编器(as)将hello.s中的汇编语言翻译成**机器语言指令**，得到一个二进制文件hello.o
- 链接阶段。头文件中只包含函数的声明，当我们的源程序中包含其他文件中定义的函数时，链接器(ld)就会负责合并源程序的二进制文件hello.o和代表函数的二进制文件(如printf.o)。最终得到一个可执行文件hello，存储于磁盘中

# 4 处理器读并解释存储在存储器中的指令
想要在Unix系统上运行存储在磁盘中的可执行文件hello，就需要将其文件名输入到外壳(shell)中
```
./hello
```
shell是一个命令行解释器。如果命令行的第一个单词不是一个内置的shell命令，那么shell就会假设这是一个可执行文件的名字。它将加载并运行这个文件，该文件运行终止后shell会输出一个提示符，等待下一个输入的命令行

## 4.1 系统的硬件组成
![一个典型系统的硬件组成](Images/1_1.png)

1. 总线(I/O bus)。携带信息字节并负责在各个部件间传递。通常信息以**字**(定长的字节块,32位系统为4字节，64位系统为8字节)的形式在总线中传递
2. I/O设备(如：Mouse, Keyboard, Display, Disk)。每个设备都通过一个控制器(controller)或适配器(adapter)与I/O总线相连。控制器是位于设备本身或系统主板的芯片组，而适配器是一块插在主板插槽上的卡。磁盘用于长期存储数据和程序。
3. 主存(Main Memory)。临时存储设备，在处理器执行程序时，用来存放程序和程序处理的数据。主存是由一组动态随机存取存储器(DRAM)芯片组成的。
4. 处理器(CPU)。处理器的核心程序计数器(PC)是一个存储设备。PC在任何时刻都指向主存中的某条机器语言指令，即含有该条指令的地址。从系统通电开始，直到系统断电，处理器一致在不断执行PC指向的指令，再更新PC，使其指向下一条指令(并不一定与主存中刚刚执行的指令相邻)。
   
   而每条指令实际上可能要求CPU执行以下操作：
   - 加载：把一个字节或者一个字从主存(Main Memory)复制到寄存器(Register File)，以覆盖寄存器原来的内容。 
   - 存储：把一个字节或者一个字从寄存器赋值到主存的某个位置，以覆盖这个位置原来的内容
   - 操作：把两个寄存器中的内容复制到算术/逻辑单元(ALU)，ALU对两个字做算术操作，并将结果存放到一个寄存器中，以覆盖该寄存器中原来的内容
   - 跳转：从指令本身中抽取一个字，并将这个字复制到PC中，以指向下一条指令

## 4.2 运行hello程序
1. 键盘上输入```./hello```
2. shell将输入的字符逐一读入寄存器，再把它存放到主存中
3. shell加载可执行文件hello，并利用直接存储器存取技术(DMA)直接将hello目标文件的代码和数据从磁盘读入主存
4. CPU执行机器语言指令，将"Hello World\n"字符串中的字节从主存复制到寄存器文件，再从寄存器文件复制到显示设备，并最终显示在屏幕上

# 5 高速缓存至关重要
hello程序的运行需要经过多次信息的挪动。hello程序的机器指令最初存放在磁盘上；程序加载时，被复制到主存；CPU运行程序时，指令又从主存复制到处理器。
